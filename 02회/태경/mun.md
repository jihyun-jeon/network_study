# 3장 : 물리계층 - 랜 카드, 케이블, 리피터, 허브

물리

- 컴퓨터 간 물리적 연결
- 데이터를 전기신호로 변환, 제어

> 전기신호 : 전압이 일정한 패턴으로 변해서 생기는 흐름

### 아날로그 신호

: 연속적으로 변하는 물결 모양의 신호(전압, 시간) 예) 유선전화, 라디오

### 디지털 신호

: 특정 값 기준으로 불연속적으로 변하는 막대모양 신호 예) 컴퓨터, 핸드폰

- 디지털 신호에서는 비트단위인 0과 1을 위 막대처럼 변환된다.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c12a770a-a0b7-44e8-a622-664dd405b284/2d8d356c-6d26-4bde-b9ca-4a673b8cc206/Untitled.png)

### LAN Card 랜 카드

: 0, 1 비트 단위를 **전기신호로 변환** 후 컴퓨터를 인터넷과 연결하기 위해 내보내는 장치

### 케이블

: 랜 카드에서 내보낸 디지털 신호를 전달하는 역할

- 예시
  - 동축 케이블 : TV 케이블로 사용되고 중앙의 구리선 존재
  - 이중나선 케이블 : 컴퓨터에서 사용되는 여러 전선 꼬아서(전파 간섭 줄이기 위해 꼬아서 사용) 만든 전선
    1. UTP (Unshielded Twisted Pair)
       : 감싸지 않은 쌍으로 꼬인 선 - 컴퓨터 통신에 주로 사용
    2. FTP (Foiled Twisted Pair)
       : 알루미늄 은박이 4 가닥 전선을 감싸는 케이블 - 절연 기능이 좋아 공장 배선 용도로 사용.
    3. STP (Shielded Twisted Pair)
       : 케이블 겉면에 외부 피복 추가된 케이블 - 피복(실드)는 외부 잡음 차단, 전기적 신호 간섭 줄이는 용도로, 정확한 데이터 전달 용이
       ⇒ 신호가 왜곡되기 떄문에 잡음 차단해야 함 - UTP에 비해 비쌈 - 컴퓨터 통신에 주로 사용

### 리피터

: 거리가 멀어져서 감쇠된 전기 신호를 증폭해주는 네트워크 장치

### 허브

: 리피터의 확장 버전으로 요즘엔 거의 허브를 주로 사용.

- 데이터 신호 정형, 증폭, 데이터 왜곡 보정, 하나의 입력 신호를 여러 디바이스로 복제하여 데이터 분배 및 네트워크 확장 지원, 데이터 충돌 처리 후 정상 전달
- 여러 포트를 가져서 여러 컴퓨터와 연결 가능

<br  /><br  /><br  /><br  />

<br  /><br  /><br  /><br  />

# 4장 - 데이터링크 계층

데이터 링크 계층

: 네트워크에서 데이터를 관리하고 전달하는 계층

- 데이터를 작은 프레임 단위로 분할
- MAC 주소 활용하여 장비 식별
- 데이터 동시 전송 시 여러 데이터의 신호 충돌때문에 오류 탐지 후 수정하는 역할
- 데이터의 원활한 흐름과 네트워크 매체에서 충돌 관리 수행
- 오류 감지 방식 : 회선 제어, 오류 제어, 흐름 제어

<br  /><br  />

# 오류 감지 방식

# 1. 회선 제어

: 신호끼리 충돌되지 않도록 회피하는 방법

- 신호시작 ENQ(Enquiry), 신호 끝 EOT(End of Transmission) 지정
- 수신자는 신호나 데이터를 정상적으로 받으면 송신자에 ACK(Acknowledgment) 전송

# 2. 오류 제어

송수신 데이터가 외부 간섭, 시간 지연 등에 의해 데이터가 변형되거나 순서가 달라지는 등 통신 장애가 발생안되도록 오류 검출하고 정정하여 통신 신뢰성을 확보한다.

### 오류 검사 종류

## **1. Parity Check 패리티 검사**

: 데이터 전달 과정의 오류 검측위해 8비트에서 가장 마지막 비트(parity bit)를 짝수/홀수가 되도록 맞춰 보내는 방식.

- 수신자에 보내는 데이터의 1의 총 개수를 짝수(even parity) or 홀수(odd parity)개로 보낼지 송-수신자가 사전 약속 후 여분 비트(parity bit)를 채워 보내는 방법.
- 단점
  - 오류 발생은 감지하지만 어느 비트가 오류인지 알지 못하고, 수정도 못하므로 송신측에 데이터 재송신 요청해야 함
  - 1 비트가 아닌 짝수단위 비트에서 오류 발생 시 오류 검출 못함
- 따라서 단순 작업 반복이나 오류 감지만 해도 되는 경우에 사용
  : 모뎀간 통신, PCI 버스, I/O 버스 등 하드웨어에서 주로 사용

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c12a770a-a0b7-44e8-a622-664dd405b284/0defa986-0ef5-404d-a9d8-6d98b6944fbc/Untitled.png)

## **2. CRC(Cyclic Redundancy Check)**

: 순환중복 검사; 데이터에 CRC 코드 추가해서 오류 감지하는 방식

- CRC-1, CRC-16 등의 알고리즘으로 나온 값을 통해 데이터 전송오류감지를 수행

1. 송신자측이 CRC코드 생성 후
2. 수신자측에서 동일한 계산 수행하여 일치 여부 판단

## **3. Checksum 검사합**

: 전달된 데이터가 변경됐는지 검사하는 값

- 송-수신측에서 데이터와 관련된 검사합 계산 후 불일치 시 오류로 감지
- MD5, SHA-256 등의 알고리즘으로 나온 값을 통해 데이터 무결성을 보호
- [참고 블로그](https://galid1.tistory.com/310)
- 오류 발생 시 Hamming code 해밍코드로 수정함

## **Hamming code 해밍코드**

: 데이터에 추가적인 패리티 비트 포함

# 3. 흐름 제어

:수신자가 받을 수 있는 버퍼 크기에 따라 송신자의 데이터 전송량을 조정하는 방식

리시버 버퍼에 데이터가 쌓이면 APP 계층에서 데이터를 가져가서 읽는다. 그런데 가져가는 속도보다 쌓이는 속도가 빠르게 되면 버퍼에 빈 공간이 없어서 데이터를 못받고 유실될 수 있다. 따라서 수신자 버퍼 크기만큼 송신자의 window 크기를 조절해야한다.

1. Stop & Wait 정지-대기

   :송신자가 1개 데이터 전송 후 수신자의 확인 응답ACK 기다리는 방법

---

<br  /><br  />

# Ethernet

: 다수 컴퓨터, 허브, 스위치 등을 1개 인터넷 케이블에 연결한 네트워크 구조

- LAN, WAN에서도 사용

<aside>
💡 collision 충돌 : 2대 이상 컴퓨터가 동시에 같은 컴퓨터로 데이터 보내는 상황

</aside>

- CSMA/CD(Carrier Sense Multiple Access/Conllision Detection) 프로토콜 사용
  : 충돌 막기 위해 이더넷에서 전류의 강도를 확인해 케이블이 사용중인지 (눈치게임) 확인하는 CSMA/CD 방식 사용
  - OSI 7계층 중 2계층에 해당하는 스위치 장비가 대신하므로 잘 사용 안함
  1. 송신 전 케이블 사용 가능한지 확인 Carrier Sense
  2. 사용가능 시 데이터 전송 Multiple Access
  3. 전송 후 충돌 확인 Collision Detection

**케이블 사용중인지 확인 방식**

1. 1-persistent

   : 케이블이 사용중인지 상태 계속 확인하다가 아무도 사용안하면 데이터 전송

   - 동시에 다른 컴퓨터에서도 전송할 수 있기 때문에 충돌 위험성 높음

1. nonpersistent

   : 누구도 케이블 사용 안하면 데이터 바로 보내고, 사용중이면 임의시간 대기 후 케이블 상태 확인

   - 1-persistent보다 충돌 위험 낮음

1. p-persistent

   : 케이블 사용중이면 대기 후 재상태 후, 사용안하면 일정 확률로 데이터 전송

   - 1-persistent과 nonpersistent의 결합

## MAC Media Access Control 주소

: 랜 카드에 할당된 전세계 유일한 값.

- 48 bit로 표현,
  - 상위 24bit OUI(Organizational Unique Identifier) - 랜 카드 제조사 번호
  - 이후 24bit UAA(Universally Administered Address) - 랜카드 제조사가 랜카드에 부여한 고유번호
- 8 bit 단위의 `:`콜론이나 `-`하이픈으로 16진수 표기

## 데이터링크 계층의 헤더

1. 송,수신자 MAC주소가 담긴다.
2. 유형에는 IPv4, ARP, Ipv6 담긴다

### IPv4

: 32 bit IP 주소

### IPv6

: 128 bit IP 주소 (IPv4 주소 부족 문제 해결위해 등장)

### ARP(Address Resolution Protocol)

: IP주소와 MAC주소 매핑해주는 프로토콜로 목적지 MAC 주소 알아낸다.

1. 브로드캐스트(모든컴퓨터에 질의), ARP Request( MAC 주소 요청)

   : A 컴퓨터가 같은 허브에 있는 모든 컴퓨터에게 IP주소의 MAC 주소 질의

2. ARP Reply : 해당 IP를 사용하는 컴퓨터가 요청에 MAC 주소 전달
3. ARP Table : 메모리에 저장하여 앞으로 통신에서 이 테이블을 참조함

<br /><br />

# 스위치

: 소규모 네트워크에서 컴퓨터, 프린터 등 장치를 연결해서 데이터를 쉽게 공유하는 장비

- 여러 포트를 꼽을 수 있게 되어 있음
- 포트에 연결된 컴퓨터의 MAC 주소를 MAC 테이블에 관리함

**예시**

1. 1번 컴 → 2번 컴으로 데이터 전송하려고 함
2. 1번 컴의 ARP 테이블에 2번 컴의 MAC 주소가 없다면 스위치에 질의
3. 스위치기 자신의 MAC 테이블의 2번 MAC 주소 확인 후 1번 컴에 전달
4. 1번 - 2번 컴 서로 통신. MAC 주소 필터링 : 다른 컴퓨터에게 전달되지 않음

<br /><br />

# 전송방향 따른 통신 방식

1. 단방향 통신

   : 송신 - 채널 - 수신 방향 예) TV, 라디오

2. 양방향 통신

   : 1개 통신 채널에서 송수신 모두 가능

   1. 반이중(Half Duplex)

      : 양방향 통신 가능이지만 동시 통신은 불가능

      - 데이터 전송속도 빠름
      - 주로 허브에서 사용
      - 동시에 데이터 보내는 충돌 문제는 있음

   2. 전이중(Full Duplex)

      : 채널을 2개 두고 양방향에서 동시 데이터를 주고 받는 방식

      - 주로 스위치에서 사용
      - 채널이 2개이기때문에 충돌문제 해결 가능
      -

느낀점

질문
